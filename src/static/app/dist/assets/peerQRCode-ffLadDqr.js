import{b as n}from"./browser-CjSdxGTc.js";import{L as c}from"./localeText-BL2XSmCp.js";import{_ as l,D as p,g as m,k as _,a as r,c as d,b as e,d as u,n as h,e as f}from"./index-DAYCBooh.js";const g={name:"peerQRCode",components:{LocaleText:c},props:{selectedPeer:Object},setup(){return{dashboardStore:p()}},data(){return{loading:!0}},mounted(){m("/api/downloadPeer/"+this.$route.params.id,{id:this.selectedPeer.id},o=>{if(this.loading=!1,o.status)if(this.selectedPeer.configuration.Protocol==="awg"){let t={containers:[{awg:{isThirdPartyConfig:!0,last_config:o.data.file,port:this.selectedPeer.configuration.ListenPort,transport_proto:"udp"},container:"amnezia-awg"}],defaultContainer:"amnezia-awg",description:this.selectedPeer.name,hostName:this.dashboardStore.Configuration.Peers.remote_endpoint};n.toCanvas(document.querySelector("#qrcode"),btoa(JSON.stringify(t)),s=>{s&&console.error(s)})}else n.toCanvas(document.querySelector("#qrcode"),o.data.file,t=>{t&&console.error(t)});else this.dashboardStore.newMessage("Server",o.message,"danger")})}},b={class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0"},v={class:"container d-flex h-100 w-100"},C={class:"m-auto modal-dialog-centered dashboardModal justify-content-center"},w={class:"card rounded-3 shadow"},P={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-0"},S={class:"mb-0"},x={class:"card-body p-4"},y={class:"d-flex"},L={key:0,class:"spinner-border m-auto",role:"status"};function k(o,t,s,q,a,N){const i=_("LocaleText");return r(),d("div",b,[e("div",v,[e("div",C,[e("div",w,[e("div",P,[e("h4",S,[u(i,{t:"QR Code"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:t[0]||(t[0]=$=>this.$emit("close"))})]),e("div",x,[e("div",y,[e("canvas",{id:"qrcode",class:h(["rounded-3 shadow animate__animated animate__fadeIn animate__faster",{"d-none":a.loading}])},null,2),a.loading?(r(),d("div",L,t[1]||(t[1]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):f("",!0)])])])])])])}const j=l(g,[["render",k],["__scopeId","data-v-ed518d45"]]);export{j as default};
