import{W as k,D as S,q as c,C as _,a0 as U,E as D,o as N,c as V,a as e,b as a,t as v,k as i,v as O,p as d,n as I,m as L}from"./index.js";import{L as n}from"./localeText.js";const J={class:"container d-flex h-100 w-100"},M={class:"m-auto modal-dialog-centered dashboardModal",style:{width:"700px"}},$={class:"card rounded-3 shadow flex-grow-1"},A={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4"},W={class:"mb-0"},B={class:"card-body px-4 pb-4"},E={class:"d-flex gap-2 flex-column"},F={class:"d-flex align-items-center"},T={class:"text-muted"},j={class:"ms-auto"},q={class:"d-flex align-items-center"},R={class:"text-muted"},z={class:"ms-auto"},G={for:"configuration_private_key",class:"form-label d-flex"},H={class:"text-muted d-block"},Q={class:"form-check form-switch ms-auto"},X=["disabled"],Y={for:"configuration_ipaddress_cidr",class:"form-label"},Z={class:"text-muted"},ee=["disabled"],te={for:"configuration_listen_port",class:"form-label"},se={class:"text-muted"},oe=["disabled"],le={for:"configuration_preup",class:"form-label"},ae={class:"text-muted"},ne=["disabled"],ie={for:"configuration_predown",class:"form-label"},de={class:"text-muted"},re=["disabled"],ue={for:"configuration_postup",class:"form-label"},ce={class:"text-muted"},me=["disabled"],fe={for:"configuration_postdown",class:"form-label"},pe={class:"text-muted"},be=["disabled"],_e={class:"d-flex align-items-center gap-2 mt-4"},ve=["disabled"],ge=["disabled"],Pe={__name:"editConfiguration",props:{configurationInfo:Object},emits:["changed","close"],setup(g,{emit:y}){const m=g,h=k(),b=S(),l=c(!1),s=_(JSON.parse(JSON.stringify(m.configurationInfo))),f=c(!1),r=c(!1);c(!1);const p=_({PrivateKey:!0,IPAddress:!0,ListenPort:!0}),P=U("editConfigurationContainer"),x=()=>{h.checkWGKeyLength(s.PrivateKey)?(p.PrivateKey=!0,s.PublicKey=window.wireguard.generatePublicKey(s.PrivateKey)):p.PrivateKey=!1},w=()=>{r.value=!1,Object.assign(s,JSON.parse(JSON.stringify(m.configurationInfo)))},C=y,K=()=>{l.value=!0,L("/api/updateWireguardConfiguration",s,u=>{l.value=!1,u.status?(b.newMessage("Server","Configuration saved","success"),r.value=!1,C("dataChanged",u.data)):b.newMessage("Server",u.message,"danger")})};return D(s,()=>{r.value=JSON.stringify(s)!==JSON.stringify(m.configurationInfo)},{deep:!0}),c(!1),(u,t)=>(N(),V("div",{class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0 overflow-y-scroll",ref_key:"editConfigurationContainer",ref:P},[e("div",J,[e("div",M,[e("div",$,[e("div",A,[e("h4",W,[a(n,{t:"Configuration Settings"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:t[0]||(t[0]=o=>u.$emit("close"))})]),e("div",B,[e("div",E,[e("div",F,[e("small",T,[a(n,{t:"Name"})]),e("small",j,[e("samp",null,v(s.Name),1)])]),e("div",q,[e("small",R,[a(n,{t:"Public Key"})]),e("small",z,[e("samp",null,v(s.PublicKey),1)])]),t[15]||(t[15]=e("hr",null,null,-1)),e("div",null,[e("label",G,[e("small",H,[a(n,{t:"Private Key"})]),e("div",Q,[i(e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"editPrivateKeySwitch","onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o)},null,512),[[O,f.value]]),t[12]||(t[12]=e("label",{class:"form-check-label",for:"editPrivateKeySwitch"},[e("small",null,"Edit")],-1))])]),i(e("input",{type:"text",class:I(["form-control form-control-sm rounded-3",{"is-invalid":!p.PrivateKey}]),disabled:l.value||!f.value,onKeyup:t[2]||(t[2]=o=>x()),"onUpdate:modelValue":t[3]||(t[3]=o=>s.PrivateKey=o),id:"configuration_private_key"},null,42,X),[[d,s.PrivateKey]])]),e("div",null,[e("label",Y,[e("small",Z,[a(n,{t:"IP Address/CIDR"})])]),i(e("input",{type:"text",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[4]||(t[4]=o=>s.Address=o),id:"configuration_ipaddress_cidr"},null,8,ee),[[d,s.Address]])]),e("div",null,[e("label",te,[e("small",se,[a(n,{t:"Listen Port"})])]),i(e("input",{type:"number",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[5]||(t[5]=o=>s.ListenPort=o),id:"configuration_listen_port"},null,8,oe),[[d,s.ListenPort]])]),e("div",null,[e("label",le,[e("small",ae,[a(n,{t:"PreUp"})])]),i(e("input",{type:"text",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[6]||(t[6]=o=>s.PreUp=o),id:"configuration_preup"},null,8,ne),[[d,s.PreUp]])]),e("div",null,[e("label",ie,[e("small",de,[a(n,{t:"PreDown"})])]),i(e("input",{type:"text",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[7]||(t[7]=o=>s.PreDown=o),id:"configuration_predown"},null,8,re),[[d,s.PreDown]])]),e("div",null,[e("label",ue,[e("small",ce,[a(n,{t:"PostUp"})])]),i(e("input",{type:"text",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[8]||(t[8]=o=>s.PostUp=o),id:"configuration_postup"},null,8,me),[[d,s.PostUp]])]),e("div",null,[e("label",fe,[e("small",pe,[a(n,{t:"PostDown"})])]),i(e("input",{type:"text",class:"form-control form-control-sm rounded-3",disabled:l.value,"onUpdate:modelValue":t[9]||(t[9]=o=>s.PostDown=o),id:"configuration_postdown"},null,8,be),[[d,s.PostDown]])]),e("div",_e,[e("button",{class:"btn bg-secondary-subtle border-secondary-subtle text-secondary-emphasis rounded-3 shadow ms-auto",onClick:t[10]||(t[10]=o=>w()),disabled:!r.value||l.value},t[13]||(t[13]=[e("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ve),e("button",{class:"btn bg-primary-subtle border-primary-subtle text-primary-emphasis rounded-3 shadow",disabled:!r.value||l.value,onClick:t[11]||(t[11]=o=>K())},t[14]||(t[14]=[e("i",{class:"bi bi-save-fill"},null,-1)]),8,ge)])])])])])])],512))}};export{Pe as default};
