import{_ as y,D as I,g as M,a as o,c as a,d,w as f,b as e,n as k,t as l,f as x,i as m,e as p,m as U,v as R,u as G,j as _,r as C,T as N,p as b,o as V,q as z,F as w,h as S,W as K,k as O}from"./index-DljkH9dU.js";import{L as h}from"./localeText-CYUXLmYb.js";const $={name:"configurationCard",components:{LocaleText:h},props:{c:{Name:String,Status:Boolean,PublicKey:String,PrivateKey:String},delay:String},data(){return{configurationToggling:!1}},setup(){return{dashboardConfigurationStore:I()}},methods:{toggle(){this.configurationToggling=!0,M("/api/toggleWireguardConfiguration/",{configurationName:this.c.Name},n=>{n.status?this.dashboardConfigurationStore.newMessage("Server",`${this.c.Name} ${n.data?"is on":"is off"}`):this.dashboardConfigurationStore.newMessage("Server",n.message,"danger"),this.c.Status=n.data,this.configurationToggling=!1})}}},L=()=>{G(n=>({"1d5189b2":n.delay}))},B=$.setup;$.setup=B?(n,t)=>(L(),B(n,t)):L;const F={class:"card conf_card rounded-3 shadow text-decoration-none"},W={class:"mb-0"},j={class:"card-title mb-0"},q={class:"card-footer d-flex gap-2 flex-column"},E={class:"row"},Y={class:"col-6 col-md-3"},A={class:"text-primary-emphasis col-6 col-md-3"},H={class:"text-success-emphasis col-6 col-md-3"},J={class:"text-md-end col-6 col-md-3"},Q={class:"d-flex align-items-center gap-2"},X={class:"text-muted"},Z={style:{"word-break":"keep-all"}},ee={class:"mb-0 d-block d-lg-inline-block"},te={style:{"line-break":"anywhere"}},se={class:"form-check form-switch ms-auto"},oe=["for"],ne={key:4,class:"spinner-border spinner-border-sm ms-2","aria-hidden":"true"},ae=["disabled","id"];function ie(n,t,s,c,u,i){const g=_("RouterLink"),r=_("LocaleText");return o(),a("div",F,[d(g,{to:"/configuration/"+s.c.Name+"/peers",class:"card-body d-flex align-items-center gap-3 flex-wrap text-decoration-none"},{default:f(()=>[e("h6",W,[e("span",{class:k(["dot",{active:s.c.Status}])},null,2)]),e("h6",j,[e("samp",null,l(s.c.Name),1)]),t[2]||(t[2]=e("h6",{class:"mb-0 ms-auto"},[e("i",{class:"bi bi-chevron-right"})],-1))]),_:1},8,["to"]),e("div",q,[e("div",E,[e("small",Y,[t[3]||(t[3]=e("i",{class:"bi bi-arrow-down-up me-2"},null,-1)),x(l(s.c.DataUsage.Total>0?s.c.DataUsage.Total.toFixed(4):0)+" GB ",1)]),e("small",A,[t[4]||(t[4]=e("i",{class:"bi bi-arrow-down me-2"},null,-1)),x(l(s.c.DataUsage.Receive>0?s.c.DataUsage.Receive.toFixed(4):0)+" GB ",1)]),e("small",H,[t[5]||(t[5]=e("i",{class:"bi bi-arrow-up me-2"},null,-1)),x(l(s.c.DataUsage.Sent>0?s.c.DataUsage.Sent.toFixed(4):0)+" GB ",1)]),e("small",J,[e("span",{class:k(["dot me-2",{active:s.c.ConnectedPeers>0}])},null,2),x(" "+l(s.c.ConnectedPeers)+" / "+l(s.c.TotalPeers)+" ",1),d(r,{t:"Peers"})])]),e("div",Q,[e("small",X,[e("strong",Z,[d(r,{t:"Public Key"})])]),e("small",ee,[e("samp",te,l(s.c.PublicKey),1)]),e("div",se,[e("label",{class:"form-check-label",style:{cursor:"pointer"},for:"switch"+s.c.PrivateKey},[!s.c.Status&&this.configurationToggling?(o(),m(r,{key:0,t:"Turning Off..."})):s.c.Status&&this.configurationToggling?(o(),m(r,{key:1,t:"Turning On..."})):s.c.Status&&!this.configurationToggling?(o(),m(r,{key:2,t:"On"})):!s.c.Status&&!this.configurationToggling?(o(),m(r,{key:3,t:"Off"})):p("",!0),this.configurationToggling?(o(),a("span",ne)):p("",!0)],8,oe),U(e("input",{class:"form-check-input",style:{cursor:"pointer"},disabled:this.configurationToggling,type:"checkbox",role:"switch",id:"switch"+s.c.PrivateKey,onChange:t[0]||(t[0]=v=>this.toggle()),"onUpdate:modelValue":t[1]||(t[1]=v=>s.c.Status=v)},null,40,ae),[[R,s.c.Status]])])])])])}const re=y($,[["render",ie],["__scopeId","data-v-a85a04a5"]]),le={class:"text-muted me-2"},de={class:"fw-bold"},ce={__name:"cpuCore",props:{core_number:Number,percentage:Number,align:Boolean},setup(n){const t=C(!1);return(s,c)=>(o(),a("div",{class:"flex-grow-1 square rounded-3 border position-relative",onMouseenter:c[0]||(c[0]=u=>t.value=!0),onMouseleave:c[1]||(c[1]=u=>t.value=!1),style:b({"background-color":`rgb(13 110 253 / ${n.percentage*10}%)`})},[d(N,{name:"zoomReversed"},{default:f(()=>[t.value?(o(),a("div",{key:0,style:{"white-space":"nowrap"},class:k(["floatingLabel z-3 border position-absolute d-block p-1 px-2 bg-body text-body rounded-3 border shadow d-flex",[n.align?"end-0":"start-0"]])},[e("small",le," Core #"+l(n.core_number+1),1),e("small",de,l(n.percentage)+"% ",1)],2)):p("",!0)]),_:1})],36))}},ue=y(ce,[["__scopeId","data-v-899cc840"]]),ge={class:"text-muted me-2"},me={class:"fw-bold"},_e={__name:"storageMount",props:{mount:String,percentage:Number,align:Boolean},setup(n){const t=C(!1);return(s,c)=>(o(),a("div",{class:"flex-grow-1 square rounded-3 border position-relative",onMouseenter:c[0]||(c[0]=u=>t.value=!0),onMouseleave:c[1]||(c[1]=u=>t.value=!1),style:b({"background-color":`rgb(25 135 84 / ${n.percentage}%)`})},[d(N,{name:"zoomReversed"},{default:f(()=>[t.value?(o(),a("div",{key:0,style:{"white-space":"nowrap"},class:k(["floatingLabel z-3 border position-absolute d-block p-1 px-2 bg-body text-body rounded-3 border shadow d-flex",[n.align?"end-0":"start-0"]])},[e("small",ge,[e("samp",null,l(n.mount),1)]),e("small",me,l(n.percentage)+"% ",1)],2)):p("",!0)]),_:1})],36))}},be=y(_e,[["__scopeId","data-v-d1f59032"]]),he={class:"row text-body gx-4 gy-4 mb-5"},fe={class:"col-lg-6 col-xl-3"},pe={class:"d-flex align-items-center"},ve={class:"text-muted"},ye={class:"ms-auto"},xe={key:0},ke={key:1,class:"spinner-border spinner-border-sm"},we={class:"w-100 position-relative"},Se={class:"d-flex mt-2 gap-1"},Ce={class:"col-lg-6 col-xl-3"},$e={class:"d-flex align-items-center"},Te={class:"text-muted"},Le={class:"ms-auto"},Be={key:0},Me={key:1,class:"spinner-border spinner-border-sm"},Ne={class:"w-100 position-relative"},Pe={class:"d-flex mt-2 gap-1"},De={class:"col-lg-6 col-xl-3"},Ie={class:"d-flex align-items-center"},Ue={class:"text-muted"},Re={class:"ms-auto"},Ge={key:0},Ve={key:1,class:"spinner-border spinner-border-sm"},ze={class:"w-100 position-relative"},Ke={class:"col-lg-6 col-xl-3"},Oe={class:"d-flex align-items-center"},Fe={class:"text-muted"},We={class:"ms-auto"},je={key:0},qe={key:1,class:"spinner-border spinner-border-sm"},Ee={class:"w-100 position-relative"},Ye={__name:"systemStatus",setup(n){const t=C(void 0);let s=null;V(()=>{c(),s=setInterval(()=>{c()},3e3)}),z(()=>{clearInterval(s)});const c=()=>{M("/api/systemStatus",{},u=>{t.value=u.data})};return(u,i)=>(o(),a("div",he,[e("div",fe,[e("div",pe,[e("h6",ve,[i[0]||(i[0]=e("i",{class:"bi bi-cpu-fill me-2"},null,-1)),d(h,{t:"CPU"})]),e("h6",ye,[t.value?(o(),a("span",xe,l(t.value.cpu.cpu_percent)+"% ",1)):(o(),a("span",ke))])]),e("div",we,[i[1]||(i[1]=e("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),e("span",{class:"d-block bg-primary rounded-5 position-absolute top-0 bar",style:b([{height:"6px"},{width:`${t.value?.cpu.cpu_percent}%`}])},null,4)]),e("div",Se,[(o(!0),a(w,null,S(t.value?.cpu.cpu_percent_per_cpu,(g,r)=>(o(),m(ue,{key:r,align:r+1>Math.round(t.value?.cpu.cpu_percent_per_cpu.length/2),core_number:r,percentage:g},null,8,["align","core_number","percentage"]))),128))])]),e("div",Ce,[e("div",$e,[e("h6",Te,[i[2]||(i[2]=e("i",{class:"bi bi-device-ssd-fill me-2"},null,-1)),d(h,{t:"Storage"})]),e("h6",Le,[t.value?(o(),a("span",Be,l(t.value?.disk["/"].percent)+"% ",1)):(o(),a("span",Me))])]),e("div",Ne,[i[3]||(i[3]=e("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),e("span",{class:"d-block bg-success rounded-5 position-absolute top-0 bar",style:b([{height:"6px"},{width:`${t.value?.disk["/"].percent}%`}])},null,4)]),e("div",Pe,[t.value?(o(!0),a(w,{key:0},S(Object.keys(t.value?.disk),(g,r)=>(o(),m(be,{key:r,align:r+1>Math.round(Object.keys(t.value?.disk).length/2),mount:g,percentage:t.value?.disk[g].percent},null,8,["align","mount","percentage"]))),128)):p("",!0)])]),e("div",De,[e("div",Ie,[e("h6",Ue,[i[4]||(i[4]=e("i",{class:"bi bi-memory me-2"},null,-1)),d(h,{t:"Memory"})]),e("h6",Re,[t.value?(o(),a("span",Ge,l(t.value?.memory.virtual_memory.percent)+"% ",1)):(o(),a("span",Ve))])]),e("div",ze,[i[5]||(i[5]=e("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),e("span",{class:"d-block bg-info rounded-5 position-absolute top-0 bar",style:b([{height:"6px"},{width:`${t.value?.memory.virtual_memory.percent}%`}])},null,4)])]),e("div",Ke,[e("div",Oe,[e("h6",Fe,[i[6]||(i[6]=e("i",{class:"bi bi-memory me-2"},null,-1)),d(h,{t:"Swap Memory"})]),e("h6",We,[t.value?(o(),a("span",je,l(t.value?.memory.swap_memory.percent)+"% ",1)):(o(),a("span",qe))])]),e("div",Ee,[i[7]||(i[7]=e("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),e("span",{class:"d-block bg-warning rounded-5 position-absolute top-0 bar",style:b([{height:"6px"},{width:`${t.value?.memory.swap_memory.percent}%`}])},null,4)])])]))}},Ae=y(Ye,[["__scopeId","data-v-df963be7"]]),He={name:"configurationList",components:{SystemStatus:Ae,LocaleText:h,ConfigurationCard:re},async setup(){return{wireguardConfigurationsStore:K()}},data(){return{configurationLoaded:!1}},async mounted(){await this.wireguardConfigurationsStore.getConfigurations(),this.configurationLoaded=!0,this.wireguardConfigurationsStore.ConfigurationListInterval=setInterval(()=>{this.wireguardConfigurationsStore.getConfigurations()},1e4)},beforeUnmount(){clearInterval(this.wireguardConfigurationsStore.ConfigurationListInterval)}},Je={class:"mt-md-5 mt-3"},Qe={class:"container-md"},Xe={class:"d-flex mb-4 configurationListTitle align-items-center gap-3"},Ze={class:"text-body d-flex"},et={class:"text-muted",key:"noConfiguration"};function tt(n,t,s,c,u,i){const g=_("SystemStatus"),r=_("LocaleText"),v=_("RouterLink"),P=_("ConfigurationCard");return o(),a("div",Je,[e("div",Qe,[d(g),e("div",Xe,[e("h2",Ze,[e("span",null,[d(r,{t:"WireGuard Configurations"})])]),d(v,{to:"/new_configuration",class:"btn btn-dark btn-brand rounded-3 p-2 shadow ms-auto rounded-3"},{default:f(()=>t[0]||(t[0]=[e("h2",{class:"mb-0",style:{"line-height":"0"}},[e("i",{class:"bi bi-plus-circle"})],-1)])),_:1}),d(v,{to:"/restore_configuration",class:"btn btn-dark btn-brand p-2 shadow ms-2",style:{"border-radius":"100%"}},{default:f(()=>t[1]||(t[1]=[e("h2",{class:"mb-0",style:{"line-height":"0"}},[e("i",{class:"bi bi-clock-history"})],-1)])),_:1})]),d(O,{name:"fade",tag:"div",class:"d-flex flex-column gap-3 mb-4"},{default:f(()=>[this.configurationLoaded&&this.wireguardConfigurationsStore.Configurations.length===0?(o(),a("p",et,[d(r,{t:"You don't have any WireGuard configurations yet. Please check the configuration folder or change it in Settings. By default the folder is /etc/wireguard."})])):this.configurationLoaded?(o(!0),a(w,{key:1},S(this.wireguardConfigurationsStore.Configurations,(T,D)=>(o(),m(P,{delay:D*.05+"s",key:T.Name,c:T},null,8,["delay","c"]))),128)):p("",!0)]),_:1})])])}const nt=y(He,[["render",tt],["__scopeId","data-v-3d94bce5"]]);export{nt as default};
