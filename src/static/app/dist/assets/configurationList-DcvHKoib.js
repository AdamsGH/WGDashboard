import{_ as x,D as U,g as T,a,c as d,d as i,w as p,b as t,n as k,t as r,f as v,i as g,e as y,m as I,v as M,u as G,j as m,r as L,T as R,p as h,o as V,q as K,F as B,h as N,W as F,k as W}from"./index-YknOhN8V.js";import{L as _}from"./localeText-DF3eQ07j.js";const w={name:"configurationCard",components:{LocaleText:_},props:{c:{Name:String,Status:Boolean,PublicKey:String,PrivateKey:String},delay:String},data(){return{configurationToggling:!1}},setup(){return{dashboardConfigurationStore:U()}},methods:{toggle(){this.configurationToggling=!0,T("/api/toggleWireguardConfiguration/",{configurationName:this.c.Name},n=>{n.status?this.dashboardConfigurationStore.newMessage("Server",`${this.c.Name} ${n.data?"is on":"is off"}`):this.dashboardConfigurationStore.newMessage("Server",n.message,"danger"),this.c.Status=n.data,this.configurationToggling=!1})}}},C=()=>{G(n=>({"1d5189b2":n.delay}))},$=w.setup;w.setup=$?(n,e)=>(C(),$(n,e)):C;const z={class:"card conf_card rounded-3 shadow text-decoration-none"},O={class:"mb-0"},j={class:"card-title mb-0"},q={class:"card-footer d-flex gap-2 flex-column"},E={class:"row"},Y={class:"col-6 col-md-3"},A={class:"text-primary-emphasis col-6 col-md-3"},H={class:"text-success-emphasis col-6 col-md-3"},J={class:"text-md-end col-6 col-md-3"},Q={class:"d-flex align-items-center gap-2"},X={class:"text-muted"},Z={style:{"word-break":"keep-all"}},tt={class:"mb-0 d-block d-lg-inline-block"},et={style:{"line-break":"anywhere"}},st={class:"form-check form-switch ms-auto"},ot=["for"],nt={key:4,class:"spinner-border spinner-border-sm ms-2","aria-hidden":"true"},at=["disabled","id"];function it(n,e,s,c,u,o){const f=m("RouterLink"),l=m("LocaleText");return a(),d("div",z,[i(f,{to:"/configuration/"+s.c.Name+"/peers",class:"card-body d-flex align-items-center gap-3 flex-wrap text-decoration-none"},{default:p(()=>[t("h6",O,[t("span",{class:k(["dot",{active:s.c.Status}])},null,2)]),t("h6",j,[t("samp",null,r(s.c.Name),1)]),e[2]||(e[2]=t("h6",{class:"mb-0 ms-auto"},[t("i",{class:"bi bi-chevron-right"})],-1))]),_:1},8,["to"]),t("div",q,[t("div",E,[t("small",Y,[e[3]||(e[3]=t("i",{class:"bi bi-arrow-down-up me-2"},null,-1)),v(r(s.c.DataUsage.Total>0?s.c.DataUsage.Total.toFixed(4):0)+" GB ",1)]),t("small",A,[e[4]||(e[4]=t("i",{class:"bi bi-arrow-down me-2"},null,-1)),v(r(s.c.DataUsage.Receive>0?s.c.DataUsage.Receive.toFixed(4):0)+" GB ",1)]),t("small",H,[e[5]||(e[5]=t("i",{class:"bi bi-arrow-up me-2"},null,-1)),v(r(s.c.DataUsage.Sent>0?s.c.DataUsage.Sent.toFixed(4):0)+" GB ",1)]),t("small",J,[t("span",{class:k(["dot me-2",{active:s.c.ConnectedPeers>0}])},null,2),v(" "+r(s.c.ConnectedPeers)+" / "+r(s.c.TotalPeers)+" ",1),i(l,{t:"Peers"})])]),t("div",Q,[t("small",X,[t("strong",Z,[i(l,{t:"Public Key"})])]),t("small",tt,[t("samp",et,r(s.c.PublicKey),1)]),t("div",st,[t("label",{class:"form-check-label",style:{cursor:"pointer"},for:"switch"+s.c.PrivateKey},[!s.c.Status&&this.configurationToggling?(a(),g(l,{key:0,t:"Turning Off..."})):s.c.Status&&this.configurationToggling?(a(),g(l,{key:1,t:"Turning On..."})):s.c.Status&&!this.configurationToggling?(a(),g(l,{key:2,t:"On"})):!s.c.Status&&!this.configurationToggling?(a(),g(l,{key:3,t:"Off"})):y("",!0),this.configurationToggling?(a(),d("span",nt)):y("",!0)],8,ot),I(t("input",{class:"form-check-input",style:{cursor:"pointer"},disabled:this.configurationToggling,type:"checkbox",role:"switch",id:"switch"+s.c.PrivateKey,onChange:e[0]||(e[0]=b=>this.toggle()),"onUpdate:modelValue":e[1]||(e[1]=b=>s.c.Status=b)},null,40,at),[[M,s.c.Status]])])])])])}const rt=x(w,[["render",it],["__scopeId","data-v-a85a04a5"]]),lt={key:0,style:{"white-space":"nowrap"},class:"floatingLabel z-3 border position-absolute d-block p-1 px-2 bg-body text-body rounded-3 border shadow d-flex"},ct={class:"text-muted me-2"},dt={class:"fw-bold"},ut={__name:"cpuCore",props:{core_number:Number,percentage:Number},setup(n){const e=L(!1);return(s,c)=>(a(),d("div",{class:"flex-grow-1 square rounded-3 border position-relative",onMouseenter:c[0]||(c[0]=u=>e.value=!0),onMouseleave:c[1]||(c[1]=u=>e.value=!1),style:h({"background-color":`rgb(13 110 253 / ${n.percentage*10}%)`})},[i(R,{name:"zoomReversed"},{default:p(()=>[e.value?(a(),d("div",lt,[t("small",ct," Core #"+r(n.core_number+1),1),t("small",dt,r(n.percentage)+"% ",1)])):y("",!0)]),_:1})],36))}},gt=x(ut,[["__scopeId","data-v-f2b46520"]]),mt={key:0,class:"row text-body gx-4 gy-2 mb-5"},_t={class:"col-lg-6 col-xl-3"},ft={class:"d-flex align-items-center"},bt={class:"text-muted"},ht={class:"ms-auto"},pt={class:"w-100 position-relative"},yt={class:"d-flex mt-2 gap-1"},vt={class:"col-lg-6 col-xl-3"},xt={class:"d-flex align-items-center"},wt={class:"text-muted"},St={class:"ms-auto"},kt={class:"w-100 position-relative"},Ct={class:"col-lg-6 col-xl-3"},$t={class:"d-flex align-items-center"},Tt={class:"text-muted"},Lt={class:"ms-auto"},Bt={class:"w-100 position-relative"},Nt={class:"col-lg-6 col-xl-3"},Pt={class:"d-flex align-items-center"},Dt={class:"text-muted"},Ut={class:"ms-auto"},It={class:"w-100 position-relative"},Mt={__name:"systemStatus",setup(n){const e=L(void 0);let s=null;V(()=>{c(),s=setInterval(()=>{c()},1e4)}),K(()=>{clearInterval(s)});const c=()=>{T("/api/systemStatus",{},u=>{e.value=u.data})};return(u,o)=>e.value!==void 0?(a(),d("div",mt,[t("div",_t,[t("div",ft,[t("h6",bt,[o[0]||(o[0]=t("i",{class:"bi bi-cpu-fill me-2"},null,-1)),i(_,{t:"CPU"})]),t("h6",ht,r(e.value.cpu.cpu_percent)+"% ",1)]),t("div",pt,[o[1]||(o[1]=t("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),t("span",{class:"d-block bg-primary rounded-5 position-absolute top-0 bar",style:h([{height:"6px"},{width:`${e.value.cpu.cpu_percent}%`}])},null,4)]),t("div",yt,[(a(!0),d(B,null,N(e.value.cpu.cpu_percent_per_cpu,(f,l)=>(a(),g(gt,{key:l,core_number:l,percentage:f},null,8,["core_number","percentage"]))),128))])]),t("div",vt,[t("div",xt,[t("h6",wt,[o[2]||(o[2]=t("i",{class:"bi bi-memory me-2"},null,-1)),i(_,{t:"Memory"})]),t("h6",St,r(e.value.memory.virtual_memory.percent)+"% ",1)]),t("div",kt,[o[3]||(o[3]=t("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),t("span",{class:"d-block bg-primary rounded-5 position-absolute top-0 bar",style:h([{height:"6px"},{width:`${e.value.memory.virtual_memory.percent}%`}])},null,4)])]),t("div",Ct,[t("div",$t,[t("h6",Tt,[o[4]||(o[4]=t("i",{class:"bi bi-memory me-2"},null,-1)),i(_,{t:"Swap Memory"})]),t("h6",Lt,r(e.value.memory.swap_memory.percent)+"% ",1)]),t("div",Bt,[o[5]||(o[5]=t("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),t("span",{class:"d-block bg-primary rounded-5 position-absolute top-0 bar",style:h([{height:"6px"},{width:`${e.value.memory.swap_memory.percent}%`}])},null,4)])]),t("div",Nt,[t("div",Pt,[t("h6",Dt,[o[6]||(o[6]=t("i",{class:"bi bi-device-ssd-fill me-2"},null,-1)),i(_,{t:"Storage"})]),t("h6",Ut,r(e.value.disk["/"].percent)+"% ",1)]),t("div",It,[o[7]||(o[7]=t("span",{class:"d-block w-100 bg-body-secondary rounded-5 barBg",style:{height:"6px"}},null,-1)),t("span",{class:"d-block bg-primary rounded-5 position-absolute top-0 bar",style:h([{height:"6px"},{width:`${e.value.disk["/"].percent}%`}])},null,4)])])])):y("",!0)}},Gt={name:"configurationList",components:{SystemStatus:Mt,LocaleText:_,ConfigurationCard:rt},async setup(){return{wireguardConfigurationsStore:F()}},data(){return{configurationLoaded:!1}},async mounted(){await this.wireguardConfigurationsStore.getConfigurations(),this.configurationLoaded=!0,this.wireguardConfigurationsStore.ConfigurationListInterval=setInterval(()=>{this.wireguardConfigurationsStore.getConfigurations()},1e4)},beforeUnmount(){clearInterval(this.wireguardConfigurationsStore.ConfigurationListInterval)}},Rt={class:"mt-md-5 mt-3"},Vt={class:"container-md"},Kt={class:"d-flex mb-4 configurationListTitle align-items-center gap-3"},Ft={class:"text-body d-flex"},Wt={class:"text-muted",key:"noConfiguration"};function zt(n,e,s,c,u,o){const f=m("SystemStatus"),l=m("LocaleText"),b=m("RouterLink"),P=m("ConfigurationCard");return a(),d("div",Rt,[t("div",Vt,[i(f),t("div",Kt,[t("h2",Ft,[t("span",null,[i(l,{t:"WireGuard Configurations"})])]),i(b,{to:"/new_configuration",class:"btn btn-dark btn-brand rounded-3 p-2 shadow ms-auto rounded-3"},{default:p(()=>e[0]||(e[0]=[t("h2",{class:"mb-0",style:{"line-height":"0"}},[t("i",{class:"bi bi-plus-circle"})],-1)])),_:1}),i(b,{to:"/restore_configuration",class:"btn btn-dark btn-brand p-2 shadow ms-2",style:{"border-radius":"100%"}},{default:p(()=>e[1]||(e[1]=[t("h2",{class:"mb-0",style:{"line-height":"0"}},[t("i",{class:"bi bi-clock-history"})],-1)])),_:1})]),i(W,{name:"fade",tag:"div",class:"d-flex flex-column gap-3 mb-4"},{default:p(()=>[this.configurationLoaded&&this.wireguardConfigurationsStore.Configurations.length===0?(a(),d("p",Wt,[i(l,{t:"You don't have any WireGuard configurations yet. Please check the configuration folder or change it in Settings. By default the folder is /etc/wireguard."})])):this.configurationLoaded?(a(!0),d(B,{key:1},N(this.wireguardConfigurationsStore.Configurations,(S,D)=>(a(),g(P,{delay:D*.05+"s",key:S.Name,c:S},null,8,["delay","c"]))),128)):y("",!0)]),_:1})])])}const qt=x(Gt,[["render",zt],["__scopeId","data-v-3d94bce5"]]);export{qt as default};
